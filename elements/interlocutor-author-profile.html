<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-overlay-behavior/iron-overlay-behavior.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">

<link rel="import" href="./interlocutor-helper-behavior.html">
<link rel="import" href="./interlocutor-sdk-behavior.html">

<dom-module id="interlocutor-author-profile">
  <template>
    <style is="custom-style">
      :host {
        display: flex;
        flex-direction: column;
        justify-content: center;
        background: white;
        color: black;
        padding: 3em;
        box-shadow: rgba(0, 0, 0, 0.24) -2px 5px 12px 0px, rgba(0, 0, 0, 0.12) 0px 0px 12px 0px;
      }
      .close-wrapper {
        margin-bottom: 1em;
      }
    </style>
    <div class='close-wrapper'>
      <paper-icon-button class='close-button' icon="exit-to-app" on-tap="close"></paper-icon-button>
    </div>
    <div class='profile-body'>
      <iron-image src=[[_avatarUrl(userName)]] style="width:1.8em; height:1.8em" sizing="contain" preload fade></iron-image>
      [[userName]]
      </br>
      <a href=[[_contactUserURL(userName)]] rel="noopener noreferrer" target="_blank">Contact via. Matrix</a>
    </div>
  </template>
<script>
  Polymer({
    is: 'interlocutor-author-profile',
    behaviors: [
      InterlocutorSdkBehavior,
      Polymer.IronOverlayBehavior,
      InterlocutorHelperBehavior,
    ],
    properties: {
        userName: {
          type: String,
          value: '',
        },
    },
    _contactUserURL(userName) {
      return `https://matrix.to/#/${userName}`
    },
    _avatarUrl(userName) {
      return userName ? client.mxcUrlToHttp(client.getUser(userName).avatarUrl) : ''
    },

  })
</script>
